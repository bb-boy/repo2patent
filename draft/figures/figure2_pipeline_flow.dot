
digraph G {
  graph [rankdir=TB, splines=ortho, bgcolor=white, fontname="SimSun", charset="UTF-8",
         nodesep=0.30, ranksep=0.44, pad=0.16,
         size="6.69,9.65", ratio=compress, margin=0.02];
  node  [shape=box, style="solid", color=black, penwidth=2.0,
         fontname="SimSun", fontsize=12, margin="0.08,0.06"];
  edge  [color=black, arrowsize=0.75, penwidth=2.0, arrowhead=normal, fontname="SimSun", fontsize=12];

  s101 [label="接收文件源与网络源工业数据\n(S101)"];
  s102 [label="解析并执行统一建模\n(S102)"];
  s103 [label="按主题发送至消息中间件\n(S103)"];
  s104 [label="分主题消费并分层存储\n(S104)"];
  s105 [label="提供查询与同步触发接口\n(S105)"];
  s106 [label="推送处理状态与结果\n(S106)"];
  dec  [shape=diamond, style=solid, penwidth=2.0, label="主数据源可用？\n(S201)"];
  yesn [label="是：按主数据源处理\n(S202)"];
  non  [label="否：切换备用数据源\n(S203)"];
  s204 [label="继续执行S102-S106\n(S204)"];

  s101 -> s102 -> s103 -> s104 -> s105 -> s106;
  s103 -> dec;
  dec -> yesn;
  dec -> non;
  yesn -> s104;
  non  -> s204 -> s104;

  legend [shape=box, style=solid, penwidth=2.0, fontsize=12,
          label="附图标记说明\lS101-S106 主流程步骤\lS201 可用性判断\lS202-S204 回退分支\l"];
}
